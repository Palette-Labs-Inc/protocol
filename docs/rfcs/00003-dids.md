# RFC: Self-Authentication

- **status:** Draft
- **Author:** Michael Perhats
- **Created:** 02-26-2024
- **Last supportd:** 02-26-2024

## Abstract

This abstract is cut and paste from the [W3C publication on DIDs](https://www.w3.org/TR/did-core/)

[Decentralized identifiers](https://www.w3.org/TR/did-core/#dfn-decentralized-identifiers) (DIDs) are a new type of identifier that enables verifiable, decentralized digital identity. A [DID](https://www.w3.org/TR/did-core/#dfn-decentralized-identifiers) refers to any subject (e.g., a person, organization, thing, data model, abstract entity, etc.) as determined by the controller of the [DID](https://www.w3.org/TR/did-core/#dfn-decentralized-identifiers). In contrast to typical, federated identifiers, [DIDs](https://www.w3.org/TR/did-core/#dfn-decentralized-identifiers) have been designed so that they may be decoupled from centralized registries, identity providers, and certificate authorities. Specifically, while other parties might be used to help enable the discovery of information related to a [DID](https://www.w3.org/TR/did-core/#dfn-decentralized-identifiers), the design enables the controller of a [DID](https://www.w3.org/TR/did-core/#dfn-decentralized-identifiers) to prove control over it without requiring permission from any other party. [DIDs](https://www.w3.org/TR/did-core/#dfn-decentralized-identifiers) are [URIs](https://www.w3.org/TR/did-core/#dfn-uri) that associate a [DID subject](https://www.w3.org/TR/did-core/#dfn-did-subjects) with a [DID document](https://www.w3.org/TR/did-core/#dfn-did-documents) allowing trustable interactions associated with that subject.

Each [DID document](https://www.w3.org/TR/did-core/#dfn-did-documents) can express cryptographic material, [verification methods](https://www.w3.org/TR/did-core/#dfn-verification-method), or [services](https://www.w3.org/TR/did-core/#dfn-service), which provide a set of mechanisms enabling a [DID controller](https://www.w3.org/TR/did-core/#dfn-did-controllers) to prove control of the [DID](https://www.w3.org/TR/did-core/#dfn-decentralized-identifiers). [Services](https://www.w3.org/TR/did-core/#dfn-service) enable trusted interactions associated with the [DID subject](https://www.w3.org/TR/did-core/#dfn-did-subjects). A [DID](https://www.w3.org/TR/did-core/#dfn-decentralized-identifiers) might provide the means to return the [DID subject](https://www.w3.org/TR/did-core/#dfn-did-subjects) itself, if the [DID subject](https://www.w3.org/TR/did-core/#dfn-did-subjects) is an information resource such as a data model.

## Introduction

The [core network architecture](./00001-core-architecture.md) defines a distributed network of `Buyer` and `Provider` Servicing Nodes who onboard either side of a two-sided-market. In centralized corporate networks and federated server-to-server networks, the servers own a users identity and, as such, their relationship to the network. As the network grows, and power accumulates to these central authorities, platforms begin to extract from stakeholders - usually through increasingly high take rates in commercial settings. The intermediaries relationships with network participants changes from positive-sum to zero-sum. _More about the attract, extract lifecycle of web2 platforms [here](https://cdixon.org/2018/02/18/why-decentralization-matters)_.

To prevent such dynamics, we develop structures for a [self-authenticating](https://en.wiktionary.org/wiki/self-authenticating) protocol. Our design grants users the ability to "switch" between managed-hosts (nodes) at will, shifting control to users, and introduces a concept of a "data-backpack" through content-addressed (vs. location addressed) data structures. 

In our analysis, we borrow concepts from both federated and p2p networks. Our research adopts concepts of[“authenticated data structures”](https://www.cs.umd.edu/~mwh/papers/gpads.pdf), [decentralized identifiers](https://www.w3.org/TR/did-core/), [public-key cryptography](https://en.wikipedia.org/wiki/Public-key_cryptography), [content addresses](https://en.wikipedia.org/wiki/Content-addressable_storage), and [verifiable computation](https://en.wikipedia.org/wiki/Content-addressable_storage).

**Our design has 3 considerations:**

- _Public-Key Cryptography_ - Users have full control over their data, when it is used, and who is authorized to use it. Users "stamp" the content and information that they create in the network with their signaute, allowing their account to be controlled by them, rather than an authorized hosting provider.

- _Content-addressed data_ a users data will be content-addressed (vs. location addrressed), and considerded _live_ independent from any specific host. A user can sign a piece of content with their private key to prove they created it. When this information is saved, the data contents themselves are used to generate a cryptographic hash or "fingerprint" of the content. Content-addressing allows for data to be verified regardless of it's location and introduces a new design space and mechanisms to migrate away from traditional client-to-server artchitectures.

As a user travels between applications in the network, they can present and authorize a client to use their data. This grants control to the user and introduces a UX improvement over traditional, non-interoperable applicatons: users need only input data once, removing the requirement for mundane and repetitive authentication flows for things like address input, email input, etc. - ultimately reducing friction for new client applications to offer unique services for users in the network.  

- _Verifiable Compute / ZK_ - Verifiable computations allow an agent to outsource computational tasks to untrusted third parties and verify that the computation was performed correctly (as in a zero knowledge proof) without having to perform the computation themselves. Verifiably compute is useful in distributed systems for preserving private information (concealing inputs), and delegating complex tasks to entities with more resources to perform specific computations.

## Motivation

**Case study 1:**
- Alice signs up for Client App Nosh.
- Alice inputs shipping address, her shipping address is stored in `BSN(x)` (buyer side backend server).
- Client Nosh saves Shipping Address, data is content addressed in `BSN(x)`
- Alice authorizes Client App Chomp to use her data.
- Client App Chomp finds Alice's data based on her DID and the CID from a distributed hash table or registry, similar to IPFS.

**Case study 2:**
- Bob signs up for `PSN` GrubDash.
- `PSN` GrubDash goes down, has performance or latency issues, or begins charigng exorbinant fees. 
- Bob redirects his identity to `PSN` DelishEats
- The switch from `PSN` GrubDash to `PSN` DelishEats does not require permission from `PSN` GrubDash. 
- `PSN` DelishEats now fulfills Bob's needs.

## Proposal

The main content of the RFC:
- Detailed description of the proposed solution or standard.
- Technical specifications and design details.
- Examples of how the solution would work in practice.

## Examples



## References
- ATProto [Repository specification](https://atproto.com/specs/repository).
- Farcaster [protocol specificatiion](https://github.com/farcasterxyz/protocol/blob/main/docs/SPECIFICATION.md#13-storage-registry)
- DIDs, [W3c] (https://www.w3.org/TR/did-core/)
- [Verifiable computing](https://en.wikipedia.org/wiki/Verifiable_computing)
- [“authenticated data structures”](https://www.cs.umd.edu/~mwh/papers/gpads.pdf)
- [decentralized identifiers](https://www.w3.org/TR/did-core/)
- [public-key cryptography](https://en.wikipedia.org/wiki/Public-key_cryptography)
- [content addresses](https://en.wikipedia.org/wiki/Content-addressable_storage)
- [verifiable computation](https://en.wikipedia.org/wiki/Content-addressable_storage)
- [IPFS, content addressing](https://filebase.com/blog/ipfs-content-addressing-explained/#:~:text=InterPlanetary%20File%20System%2C%20or%20IPFS,data's%20content%20identifier%20or%20CID.)
- - Bluesky full ecosystem [overview](https://gitlab.com/bluesky-community1/decentralized-ecosystem/-/blob/master/README.md) 
- Bluesky Identity and Auth [overview](https://gitlab.com/bluesky-community1/decentralized-ecosystem/-/blob/master/topics/identity.md)
- ActivityPub [W3C specification](https://www.w3.org/TR/activitypub/)
- Disco.xyz - introduces a concept of [data backpacks](https://docs.disco.xyz/disco-docs-1/welcome/welcome-to-disco/data-backpacks). Notes on the [3-sided marketplace](https://docs.disco.xyz/disco-docs-1/learn-more/data-backpacks-for-holders/the-3-sided-marketplace-of-verifiable-data) of Verifiable Data from Disco docs.
