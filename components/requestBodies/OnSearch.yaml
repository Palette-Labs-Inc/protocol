description: a PSN's response to a Buyer's search request
content:
  application/json:
    schema:
      type: object
      properties:
        action:
          enum:
            - ON_SEARCH
        callback_reference: 
          description: the reference identifiers used during a buyer <> provider transaction lifecycle to connect the requests over multiple network requests and callback cycles.
          type: object
          properties:
            transaction_id:
                description: a unique id representing the session of a Buyer. Used across all communications throughout a Buyer's transaction lifecycle
                type: string
            message_id:
                description: generated by the <code>BSN</code> - a unique id representing a specific request/callback cycle
                type: string
          required:
            - transaction_id
            - message_id
        psn_parameters:
          type: object
          properties:
            uid: 
                $ref: '../schemas/entities/Node.yaml#/properties/uid'
            name: 
                $ref: '../schemas/entities/Node.yaml#/properties/name'
            callback_url: 
                $ref: '../schemas/entities/Node.yaml#/properties/callback_url'
          required:
            - uid
            - name
            - callback_url
        message:
          type: object
          properties:
            providers:
              title: Provider List
              description: >
                - The providers that a Provider Supporting Node represents. Typically sent in response to a search query from a Buyer Supporting Node. It encompasses payment terms, and fulfillment options the Provider Supporting Node supports. A ttl can be provided, indicating how long the Buyer Supporting Node is permitted to cache and utilize the provider list.
                - The PSN must respond with a list of providers, the level of detail that the response contains is up to the PSN. If the BSN requires more information about a provider, they can trigger another research for the specific provider targeted at the PSN.
              type: object
              properties:
                descriptor:
                  description: A comprehensive description of the provider catalog.
                  $ref: '../schemas/Descriptor.yaml'
                fulfillment_modes:
                  description: Modes of fulfillment directly supported by the PSN, subject to provider-specific overrides.
                  type: array
                  items:
                    $ref: '../schemas/primitives/FulfillmentMode.yaml'
                providers:
                  description: A list of providers managed by the PSN, detailing their offerings.
                  type: array
                  items:
                    $ref: '../schemas/entities/Provider.yaml'
                expiration_time:
                  description: Expiry timestamp indicating when the provider list becomes obsolete.
                  type: string
                  format: date-time
                time_to_live:
                  description: Time in seconds before the provider list should be refreshed.
                  type: integer
          required:
            - providers
      required:
        - action
        - message
        - callback_reference
        - psn_parameters
